define("mod_harpiasurvey/edit_page",["exports","core/notification","core/config","jquery"],(function(_exports,_notification,_config,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Edit page module.
   *
   * @module     mod_harpiasurvey/edit_page
   * @copyright  2025 Your Name
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_config=_interopRequireDefault(_config),_jquery=_interopRequireDefault(_jquery);_exports.init=()=>{(0,_jquery.default)("body").on("change",".evaluates-conversation-select",(function(){const select=(0,_jquery.default)(this),pagequestionid=select.data("pagequestionid"),cmid=select.data("cmid"),evaluatesConversationId=parseInt(select.val(),10)||0;select.prop("disabled",!0);const wwwroot=_config.default.wwwroot,sesskey=_config.default.sesskey||M.cfg.sesskey,ajaxUrl=wwwroot+"/mod/harpiasurvey/ajax.php",params=new URLSearchParams({action:"update_evaluates_conversation",cmid:cmid,pagequestionid:pagequestionid,evaluates_conversation_id:evaluatesConversationId,sesskey:sesskey});fetch(ajaxUrl+"?"+params.toString()).then((response=>response.json())).then((response=>{select.prop("disabled",!1),response.success?_notification.default.addNotification({message:response.message||"Conversation relationship updated",type:"success"}):(select.val(select.data("previous-value")||0),_notification.default.addNotification({message:response.message||"Error updating conversation relationship",type:"error"}))})).catch((error=>{select.prop("disabled",!1),select.val(select.data("previous-value")||0),_notification.default.exception(error)}))})),(0,_jquery.default)("body").on("focus",".evaluates-conversation-select",(function(){(0,_jquery.default)(this).data("previous-value",(0,_jquery.default)(this).val())}))}}));

//# sourceMappingURL=edit_page.min.js.map